# Topological Cluster Classification in Python


## Introduction

This package aims to provide a stand-alone Python interface for the [TCC](https://github.com/royallgroup/TCC) software.

## Install

You can clone the repository from GitHub and install, with the following command.

```sh
git clone --recurse-submodules https://github.com/yangyushi/tcclib
cd tcclib
python3 -m pip install . --user
```

You will need a C compiler (like GCC) and CMake to build tcc. pyTCC also depends on numpy and pandas.

## Concept

- This package is a wrapper of the original TCC software.
- Upon installing `tcclib`, the `TCC` code will be compiled, and the binary executable will be used by `pyTCC`
- There are two main functions of `pyTCC` :
  1. To generate input files for `TCC`
  2. To parse the output file of `TCC`

## Quick Start

### Static Analysis

The standard way to use `TCC` is to analying configurations stored in an XYZ file. In pyTCC the task can be carried out using the following code.

```python
import tcc

# Specifying the output folder of TCC to be TCC-RESULT
parser = tcc.Parser('TCC-RESULT')

# [optional] Calling the TCC to analyse the xyz file.
parser.clusters_to_analyse = ['sp5c', '8A']
parser.run("DATA.xyz", box=[10, 10, 10], raw=True, clusts=True)

# Parsing the output files generated by TCC
parser.parse()

# Typical Results
parser.population    # populations clusters in different frames
parser.frame_bool(0)  # For frame 0, if particle is inside a cluster
parser.frame_count(0)  # For frame 0, if particle is inside a cluster
```

The result of the static analysis will be stored in `TCC-RESULT` folder, and it can be re-analysed without calling `tcc.run`.

### Volatile Analysis (On the Fly)

`pyTCC` also offered a way to analyse coordinates sotred as numpy array, getting the result, and then delete the output on the harddrive.

```python
# Specifying the output folder of TCC to be TCC-RESULT
otf = tcclib.OTF()

# generate 10 frames of random points with different particle numbers
coordinates = [np.random.random((500 + i, 3)) * 10 for i in range(10)]

# Calling the TCC to analyse the xyz file.
otf.clusters_to_analyse = ['sp5c', '8A']
otf.run(coordinates, box=[10, 10, 10], raw=True, clusts=True)

# Parsing the output files generated by TCC
otf.parse()

# Typical Results
otf.population    # populations clusters in different frames
otf.frame_bool(0)  # For frame 0, if particle is inside a cluster
otf.frame_count(0)  # For frame 0, if particle is inside a cluster
```

The results were sotred inside a temporary folder, and will be deleted uplon the finish of the Python interpreter.
